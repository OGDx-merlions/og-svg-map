{"version":3,"sources":["og-svg-map.es6.js"],"names":["Polymer","is","behaviors","IronResizableBehavior","listeners","properties","width","type","String","value","observer","height","contextPaneProportion","Number","attached","contextPaneOpen","d3","Px","svg","select","zoomControl","zoom","scaleExtent","on","attr","event","transform","mapZoomArea","append","style","call","toggleContextPane","currHeightNum","replace","cpMinHeightPercentage","mapHeightPercentage","newMapHeight","Math","ceil","contextPaneMinHeight","defaultHeight","contextPaneMaxHeight","invalidateSize","$","map","_adjustFilterHorizontalMargin","_removePressed","upstreamPressedCls","undefined","midstreamPressedCls","downstreamPressedCls","predictivePressedCls","_backup","key","document","querySelector","redraw","_restore","_key","_hideAll","_showAll","_toggleUpstreamOnly","_toggleMidstreamOnly","_toggleDownstreamOnly","_togglePredictiveOnly","_shouldHide","bool","newWidth","oldWidth","_adjustFilterVerticalMargin","newHeight","oldHeight","_compute","_onIronResize","_zoomIn","scaleBy","transition","duration","_zoomOut"],"mappings":"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","file":"og-svg-map.js","sourcesContent":["(function() {\n  Polymer({\n\n    is: 'og-svg-map', \n\n    behaviors: [Polymer.IronResizableBehavior],\n\n    listeners: {'iron-resize': '_onIronResize'},\n\n    properties: {\n      /**\n       * Component width\n       */\n      width: {\n        type: String,\n        value: '75vw',\n        observer: '_adjustFilterHorizontalMargin'\n      },\n      /**\n      * Component Height\n      */\n      height: {\n        type: String,\n        value: '500px',\n        observer: '_adjustFilterVerticalMargin'\n      },\n      contextPaneProportion: {\n        type: Number,\n        value: 0.35\n      }\n    },\n\n    attached() {\n      this.contextPaneOpen = false;\n      const d3 = Px.d3;\n      this.svg  = d3.select(\"#map svg\");\n      this.zoomControl = d3.zoom()\n        .scaleExtent([1, 5])\n        .on(\"zoom\", () => {\n          this.svg.attr(\"transform\", d3.event.transform);\n      });\n      this.mapZoomArea = this.svg.append(\"rect\")\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"width\", \"100%\")\n        .attr(\"height\", \"100%\")\n        .style(\"cursor\", \"grab\")\n        .call(this.zoomControl);\n    },\n\n    toggleContextPane() {\n      const currHeightNum = this.height.replace(/\\D/g, '');\n      const cpMinHeightPercentage = this.contextPaneProportion;\n      const mapHeightPercentage = (1 - cpMinHeightPercentage);\n      if(!this.contextPaneOpen) {\n        const newMapHeight = Math.ceil(currHeightNum * mapHeightPercentage);\n        this.height = this.height.replace(currHeightNum, newMapHeight);\n        this.contextPaneMinHeight = Math.ceil(currHeightNum * cpMinHeightPercentage);\n        this.contextPaneOpen = true;\n      } else {\n        this.height = this.defaultHeight;\n        this.contextPaneMinHeight = 0;\n        this.contextPaneMaxHeight = 0;\n        this.contextPaneOpen = false;\n      }\n    },\n\n    invalidateSize() {\n      this.$.map.invalidateSize();\n      this._adjustFilterHorizontalMargin();\n    },\n    _removePressed() {\n      this.upstreamPressedCls = undefined;\n      this.midstreamPressedCls = undefined;\n      this.downstreamPressedCls = undefined;\n      this.predictivePressedCls = undefined;\n    },\n    _backup(key) {\n      if(this[key] && this[key].type) {\n        this[`_${key}`] = this[key];\n        this[key] = undefined;\n        document.querySelector(`#${key}`).redraw();\n      }\n    },\n    _restore(key) {\n      const _key = `_${key}`;\n      if(this[_key] && this[_key].type) {\n        this[key] = this[_key];\n        this[_key] = undefined;\n        document.querySelector(`#${key}`).redraw();\n      }\n    },\n    _hideAll() {\n      this._removePressed();\n      this._backup('upstream');\n      this._backup('midstream');\n      this._backup('downstream');\n      this._backup('predictive');\n    },\n    _showAll() {\n      this._removePressed();\n      this._restore('upstream');\n      this._restore('midstream');\n      this._restore('downstream');\n      this._restore('predictive');\n    },\n    _toggleUpstreamOnly() {\n      if(!this.upstreamPressedCls) {\n        this._hideAll();\n        this.upstreamPressedCls = 'pressed';\n        this._restore('upstream');\n      } else {\n        this._showAll();\n      }\n    },\n    _toggleMidstreamOnly() {\n      if(!this.midstreamPressedCls) {\n        this._hideAll();\n        this.midstreamPressedCls = 'pressed';\n        this._restore('midstream');\n      } else {\n        this._showAll();\n      }\n    },\n    _toggleDownstreamOnly() {\n      if(!this.downstreamPressedCls) {\n        this._hideAll();\n        this.downstreamPressedCls = 'pressed';\n        this._restore('downstream');\n      } else {\n        this._showAll();\n      }\n    },\n    _togglePredictiveOnly() {\n      if(!this.predictivePressedCls) {\n        this._hideAll();\n        this.predictivePressedCls = 'pressed';\n        this._restore('predictive');\n      } else {\n        this._showAll();\n      }\n    },\n    _shouldHide(bool) {\n      return bool;\n    },\n    _adjustFilterHorizontalMargin(newWidth, oldWidth) {},\n    _adjustFilterVerticalMargin(newHeight, oldHeight) {\n      if(!oldHeight) {\n        this.defaultHeight = newHeight;\n      }\n    },\n    _compute(contextPaneOpen) {\n      return !contextPaneOpen;\n    },\n    _onIronResize() {},\n    _zoomIn() {\n      this.zoomControl.scaleBy(\n        this.mapZoomArea.transition().duration(750), 1.3);\n    },\n    _zoomOut() {\n      this.zoomControl.scaleBy(\n        this.mapZoomArea.transition().duration(750), 1 / 1.3);\n    },\n  });\n})();\n"]}